var atomicassets=function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=16)}([function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.byte_vector_to_int=e.int_to_byte_vector=e.concat_byte_arrays=e.hex_encode=e.hex_decode=e.base58_encode=e.base58_decode=e.zigzag_decode=e.zigzag_encode=e.integer_unsign=e.integer_sign=e.varint_decode=e.varint_encode=void 0;const n=i(r(3)),a=i(r(1)),o=i(r(5)),s=i(r(23));e.varint_encode=function(t){const e=[];let r=o.default(t);if(r.lesser(0))throw new a.default("cant pack negative integer");for(let t=0;;t++){const t=r.and(127);if(r=r.shiftRight(7),r.equals(0)){e.push(t.toJSNumber());break}e.push(t.toJSNumber()+128)}return new Uint8Array(e)},e.varint_decode=function(t){let e=o.default(0);for(let r=0;;r++){if(t.position>=t.data.length)throw new n.default("failed to unpack integer");const i=o.default(t.data[t.position]);if(t.position+=1,i.lesser(128)){e=e.plus(i.shiftLeft(7*r));break}e=e.plus(i.and(127).shiftLeft(7*r))}return e},e.integer_sign=function(t,e){const r=o.default(t);if(r.greaterOrEquals(o.default(2).pow(8*e-1)))throw new Error("cannot sign integer: too big");return r.greaterOrEquals(0)?r:r.negate().xor(o.default(2).pow(8*e).minus(1)).plus(1)},e.integer_unsign=function(t,e){const r=o.default(t);if(r.greater(o.default(2).pow(8*e)))throw new Error("cannot unsign integer: too big");return r.greater(o.default(2).pow(8*e-1))?r.minus(1).xor(o.default(2).pow(8*e).minus(1)).negate():r},e.zigzag_encode=function(t){const e=o.default(t);return e.lesserOrEquals(0)?e.plus(1).multiply(-2).plus(1):e.multiply(2)},e.zigzag_decode=function(t){const e=o.default(t);return e.mod(2).equals(0)?e.divmod(2).quotient:e.divmod(2).quotient.multiply(-1).minus(1)};const u=new s.default("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");e.base58_decode=function(t){return u.decode(t)},e.base58_encode=function(t){return u.encode(t)},e.hex_decode=function(t){const e=t.match(/.{1,2}/g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):new Uint8Array(0)},e.hex_encode=function(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")},e.concat_byte_arrays=function(t){const e=new Uint8Array(t.reduce((t,e)=>t+e.length,0));let r=0;for(const i of t)e.set(i,r),r+=i.length;return e},e.int_to_byte_vector=function(t){const e=[];let r=o.default(t);for(;r.notEquals(0);)e.push(r.and(255).toJSNumber()),r=r.shiftRight(8);return new Uint8Array(e)},e.byte_vector_to_int=function(t){let e=o.default(0);for(let r=0;r<t.length;r++)e=e.plus(o.default(t[r]).shiftLeft(8*r));return e.toJSNumber()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i extends Error{}e.default=i},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.deserialize=e.serialize=void 0;const n=i(r(13)),a=r(0),o=i(r(24));e.serialize=function(t,e){const r=e.serialize(t);return e instanceof n.default?r.slice(0,r.length-1):r},e.deserialize=function(t,e){e instanceof n.default&&(t=a.concat_byte_arrays([t,a.varint_encode(0)]));const r=new o.default(t,0);return e.deserialize(r)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i extends Error{}e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i extends Error{}e.default=i},function(t,e,r){(function(t){var i,n=function(t){"use strict";var e=9007199254740992,r=l(e),i="function"==typeof BigInt;function a(t,e,r,i){return void 0===t?a[0]:void 0!==e&&(10!=+e||r)?U(t,e,r,i):Z(t)}function o(t,e){this.value=t,this.sign=e,this.isSmall=!1}function s(t){this.value=t,this.sign=t<0,this.isSmall=!0}function u(t){this.value=t}function c(t){return-e<t&&t<e}function l(t){return t<1e7?[t]:t<1e14?[t%1e7,Math.floor(t/1e7)]:[t%1e7,Math.floor(t/1e7)%1e7,Math.floor(t/1e14)]}function f(t){p(t);var e=t.length;if(e<4&&O(t,r)<0)switch(e){case 0:return 0;case 1:return t[0];case 2:return t[0]+1e7*t[1];default:return t[0]+1e7*(t[1]+1e7*t[2])}return t}function p(t){for(var e=t.length;0===t[--e];);t.length=e+1}function h(t){for(var e=new Array(t),r=-1;++r<t;)e[r]=0;return e}function d(t){return t>0?Math.floor(t):Math.ceil(t)}function y(t,e){var r,i,n=t.length,a=e.length,o=new Array(n),s=0;for(i=0;i<a;i++)s=(r=t[i]+e[i]+s)>=1e7?1:0,o[i]=r-1e7*s;for(;i<n;)s=1e7===(r=t[i]+s)?1:0,o[i++]=r-1e7*s;return s>0&&o.push(s),o}function _(t,e){return t.length>=e.length?y(t,e):y(e,t)}function m(t,e){var r,i,n=t.length,a=new Array(n);for(i=0;i<n;i++)r=t[i]-1e7+e,e=Math.floor(r/1e7),a[i]=r-1e7*e,e+=1;for(;e>0;)a[i++]=e%1e7,e=Math.floor(e/1e7);return a}function v(t,e){var r,i,n=t.length,a=e.length,o=new Array(n),s=0;for(r=0;r<a;r++)(i=t[r]-s-e[r])<0?(i+=1e7,s=1):s=0,o[r]=i;for(r=a;r<n;r++){if(!((i=t[r]-s)<0)){o[r++]=i;break}i+=1e7,o[r]=i}for(;r<n;r++)o[r]=t[r];return p(o),o}function w(t,e,r){var i,n,a=t.length,u=new Array(a),c=-e;for(i=0;i<a;i++)n=t[i]+c,c=Math.floor(n/1e7),n%=1e7,u[i]=n<0?n+1e7:n;return"number"==typeof(u=f(u))?(r&&(u=-u),new s(u)):new o(u,r)}function g(t,e){var r,i,n,a,o=t.length,s=e.length,u=h(o+s);for(n=0;n<o;++n){a=t[n];for(var c=0;c<s;++c)r=a*e[c]+u[n+c],i=Math.floor(r/1e7),u[n+c]=r-1e7*i,u[n+c+1]+=i}return p(u),u}function b(t,e){var r,i,n=t.length,a=new Array(n),o=0;for(i=0;i<n;i++)r=t[i]*e+o,o=Math.floor(r/1e7),a[i]=r-1e7*o;for(;o>0;)a[i++]=o%1e7,o=Math.floor(o/1e7);return a}function A(t,e){for(var r=[];e-- >0;)r.push(0);return r.concat(t)}function M(t,e,r){return new o(t<1e7?b(e,t):g(e,l(t)),r)}function z(t){var e,r,i,n,a=t.length,o=h(a+a);for(i=0;i<a;i++){r=0-(n=t[i])*n;for(var s=i;s<a;s++)e=n*t[s]*2+o[i+s]+r,r=Math.floor(e/1e7),o[i+s]=e-1e7*r;o[i+a]=r}return p(o),o}function P(t,e){var r,i,n,a,o=t.length,s=h(o);for(n=0,r=o-1;r>=0;--r)n=(a=1e7*n+t[r])-(i=d(a/e))*e,s[r]=0|i;return[s,0|n]}function S(t,e){var r,n=Z(e);if(i)return[new u(t.value/n.value),new u(t.value%n.value)];var c,y=t.value,_=n.value;if(0===_)throw new Error("Cannot divide by zero");if(t.isSmall)return n.isSmall?[new s(d(y/_)),new s(y%_)]:[a[0],t];if(n.isSmall){if(1===_)return[t,a[0]];if(-1==_)return[t.negate(),a[0]];var m=Math.abs(_);if(m<1e7){c=f((r=P(y,m))[0]);var w=r[1];return t.sign&&(w=-w),"number"==typeof c?(t.sign!==n.sign&&(c=-c),[new s(c),new s(w)]):[new o(c,t.sign!==n.sign),new s(w)]}_=l(m)}var g=O(y,_);if(-1===g)return[a[0],t];if(0===g)return[a[t.sign===n.sign?1:-1],a[0]];c=(r=y.length+_.length<=200?function(t,e){var r,i,n,a,o,s,u,c=t.length,l=e.length,p=h(e.length),d=e[l-1],y=Math.ceil(1e7/(2*d)),_=b(t,y),m=b(e,y);for(_.length<=c&&_.push(0),m.push(0),d=m[l-1],i=c-l;i>=0;i--){for(r=1e7-1,_[i+l]!==d&&(r=Math.floor((1e7*_[i+l]+_[i+l-1])/d)),n=0,a=0,s=m.length,o=0;o<s;o++)n+=r*m[o],u=Math.floor(n/1e7),a+=_[i+o]-(n-1e7*u),n=u,a<0?(_[i+o]=a+1e7,a=-1):(_[i+o]=a,a=0);for(;0!==a;){for(r-=1,n=0,o=0;o<s;o++)(n+=_[i+o]-1e7+m[o])<0?(_[i+o]=n+1e7,n=0):(_[i+o]=n,n=1);a+=n}p[i]=r}return _=P(_,y)[0],[f(p),f(_)]}(y,_):function(t,e){for(var r,i,n,a,o,s=t.length,u=e.length,c=[],l=[];s;)if(l.unshift(t[--s]),p(l),O(l,e)<0)c.push(0);else{n=1e7*l[(i=l.length)-1]+l[i-2],a=1e7*e[u-1]+e[u-2],i>u&&(n=1e7*(n+1)),r=Math.ceil(n/a);do{if(O(o=b(e,r),l)<=0)break;r--}while(r);c.push(r),l=v(l,o)}return c.reverse(),[f(c),f(l)]}(y,_))[0];var A=t.sign!==n.sign,M=r[1],z=t.sign;return"number"==typeof c?(A&&(c=-c),c=new s(c)):c=new o(c,A),"number"==typeof M?(z&&(M=-M),M=new s(M)):M=new o(M,z),[c,M]}function O(t,e){if(t.length!==e.length)return t.length>e.length?1:-1;for(var r=t.length-1;r>=0;r--)if(t[r]!==e[r])return t[r]>e[r]?1:-1;return 0}function E(t){var e=t.abs();return!e.isUnit()&&(!!(e.equals(2)||e.equals(3)||e.equals(5))||!(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))&&(!!e.lesser(49)||void 0))}function x(t,e){for(var r,i,a,o=t.prev(),s=o,u=0;s.isEven();)s=s.divide(2),u++;t:for(i=0;i<e.length;i++)if(!t.lesser(e[i])&&!(a=n(e[i]).modPow(s,t)).isUnit()&&!a.equals(o)){for(r=u-1;0!=r;r--){if((a=a.square().mod(t)).isUnit())return!1;if(a.equals(o))continue t}return!1}return!0}o.prototype=Object.create(a.prototype),s.prototype=Object.create(a.prototype),u.prototype=Object.create(a.prototype),o.prototype.add=function(t){var e=Z(t);if(this.sign!==e.sign)return this.subtract(e.negate());var r=this.value,i=e.value;return e.isSmall?new o(m(r,Math.abs(i)),this.sign):new o(_(r,i),this.sign)},o.prototype.plus=o.prototype.add,s.prototype.add=function(t){var e=Z(t),r=this.value;if(r<0!==e.sign)return this.subtract(e.negate());var i=e.value;if(e.isSmall){if(c(r+i))return new s(r+i);i=l(Math.abs(i))}return new o(m(i,Math.abs(r)),r<0)},s.prototype.plus=s.prototype.add,u.prototype.add=function(t){return new u(this.value+Z(t).value)},u.prototype.plus=u.prototype.add,o.prototype.subtract=function(t){var e=Z(t);if(this.sign!==e.sign)return this.add(e.negate());var r=this.value,i=e.value;return e.isSmall?w(r,Math.abs(i),this.sign):function(t,e,r){var i;return O(t,e)>=0?i=v(t,e):(i=v(e,t),r=!r),"number"==typeof(i=f(i))?(r&&(i=-i),new s(i)):new o(i,r)}(r,i,this.sign)},o.prototype.minus=o.prototype.subtract,s.prototype.subtract=function(t){var e=Z(t),r=this.value;if(r<0!==e.sign)return this.add(e.negate());var i=e.value;return e.isSmall?new s(r-i):w(i,Math.abs(r),r>=0)},s.prototype.minus=s.prototype.subtract,u.prototype.subtract=function(t){return new u(this.value-Z(t).value)},u.prototype.minus=u.prototype.subtract,o.prototype.negate=function(){return new o(this.value,!this.sign)},s.prototype.negate=function(){var t=this.sign,e=new s(-this.value);return e.sign=!t,e},u.prototype.negate=function(){return new u(-this.value)},o.prototype.abs=function(){return new o(this.value,!1)},s.prototype.abs=function(){return new s(Math.abs(this.value))},u.prototype.abs=function(){return new u(this.value>=0?this.value:-this.value)},o.prototype.multiply=function(t){var e,r,i,n=Z(t),s=this.value,u=n.value,c=this.sign!==n.sign;if(n.isSmall){if(0===u)return a[0];if(1===u)return this;if(-1===u)return this.negate();if((e=Math.abs(u))<1e7)return new o(b(s,e),c);u=l(e)}return r=s.length,i=u.length,new o(-.012*r-.012*i+15e-6*r*i>0?function t(e,r){var i=Math.max(e.length,r.length);if(i<=30)return g(e,r);i=Math.ceil(i/2);var n=e.slice(i),a=e.slice(0,i),o=r.slice(i),s=r.slice(0,i),u=t(a,s),c=t(n,o),l=t(_(a,n),_(s,o)),f=_(_(u,A(v(v(l,u),c),i)),A(c,2*i));return p(f),f}(s,u):g(s,u),c)},o.prototype.times=o.prototype.multiply,s.prototype._multiplyBySmall=function(t){return c(t.value*this.value)?new s(t.value*this.value):M(Math.abs(t.value),l(Math.abs(this.value)),this.sign!==t.sign)},o.prototype._multiplyBySmall=function(t){return 0===t.value?a[0]:1===t.value?this:-1===t.value?this.negate():M(Math.abs(t.value),this.value,this.sign!==t.sign)},s.prototype.multiply=function(t){return Z(t)._multiplyBySmall(this)},s.prototype.times=s.prototype.multiply,u.prototype.multiply=function(t){return new u(this.value*Z(t).value)},u.prototype.times=u.prototype.multiply,o.prototype.square=function(){return new o(z(this.value),!1)},s.prototype.square=function(){var t=this.value*this.value;return c(t)?new s(t):new o(z(l(Math.abs(this.value))),!1)},u.prototype.square=function(t){return new u(this.value*this.value)},o.prototype.divmod=function(t){var e=S(this,t);return{quotient:e[0],remainder:e[1]}},u.prototype.divmod=s.prototype.divmod=o.prototype.divmod,o.prototype.divide=function(t){return S(this,t)[0]},u.prototype.over=u.prototype.divide=function(t){return new u(this.value/Z(t).value)},s.prototype.over=s.prototype.divide=o.prototype.over=o.prototype.divide,o.prototype.mod=function(t){return S(this,t)[1]},u.prototype.mod=u.prototype.remainder=function(t){return new u(this.value%Z(t).value)},s.prototype.remainder=s.prototype.mod=o.prototype.remainder=o.prototype.mod,o.prototype.pow=function(t){var e,r,i,n=Z(t),o=this.value,u=n.value;if(0===u)return a[1];if(0===o)return a[0];if(1===o)return a[1];if(-1===o)return n.isEven()?a[1]:a[-1];if(n.sign)return a[0];if(!n.isSmall)throw new Error("The exponent "+n.toString()+" is too large.");if(this.isSmall&&c(e=Math.pow(o,u)))return new s(d(e));for(r=this,i=a[1];!0&u&&(i=i.times(r),--u),0!==u;)u/=2,r=r.square();return i},s.prototype.pow=o.prototype.pow,u.prototype.pow=function(t){var e=Z(t),r=this.value,i=e.value,n=BigInt(0),o=BigInt(1),s=BigInt(2);if(i===n)return a[1];if(r===n)return a[0];if(r===o)return a[1];if(r===BigInt(-1))return e.isEven()?a[1]:a[-1];if(e.isNegative())return new u(n);for(var c=this,l=a[1];(i&o)===o&&(l=l.times(c),--i),i!==n;)i/=s,c=c.square();return l},o.prototype.modPow=function(t,e){if(t=Z(t),(e=Z(e)).isZero())throw new Error("Cannot take modPow with modulus 0");var r=a[1],i=this.mod(e);for(t.isNegative()&&(t=t.multiply(a[-1]),i=i.modInv(e));t.isPositive();){if(i.isZero())return a[0];t.isOdd()&&(r=r.multiply(i).mod(e)),t=t.divide(2),i=i.square().mod(e)}return r},u.prototype.modPow=s.prototype.modPow=o.prototype.modPow,o.prototype.compareAbs=function(t){var e=Z(t),r=this.value,i=e.value;return e.isSmall?1:O(r,i)},s.prototype.compareAbs=function(t){var e=Z(t),r=Math.abs(this.value),i=e.value;return e.isSmall?r===(i=Math.abs(i))?0:r>i?1:-1:-1},u.prototype.compareAbs=function(t){var e=this.value,r=Z(t).value;return(e=e>=0?e:-e)===(r=r>=0?r:-r)?0:e>r?1:-1},o.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=Z(t),r=this.value,i=e.value;return this.sign!==e.sign?e.sign?1:-1:e.isSmall?this.sign?-1:1:O(r,i)*(this.sign?-1:1)},o.prototype.compareTo=o.prototype.compare,s.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=Z(t),r=this.value,i=e.value;return e.isSmall?r==i?0:r>i?1:-1:r<0!==e.sign?r<0?-1:1:r<0?1:-1},s.prototype.compareTo=s.prototype.compare,u.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=this.value,r=Z(t).value;return e===r?0:e>r?1:-1},u.prototype.compareTo=u.prototype.compare,o.prototype.equals=function(t){return 0===this.compare(t)},u.prototype.eq=u.prototype.equals=s.prototype.eq=s.prototype.equals=o.prototype.eq=o.prototype.equals,o.prototype.notEquals=function(t){return 0!==this.compare(t)},u.prototype.neq=u.prototype.notEquals=s.prototype.neq=s.prototype.notEquals=o.prototype.neq=o.prototype.notEquals,o.prototype.greater=function(t){return this.compare(t)>0},u.prototype.gt=u.prototype.greater=s.prototype.gt=s.prototype.greater=o.prototype.gt=o.prototype.greater,o.prototype.lesser=function(t){return this.compare(t)<0},u.prototype.lt=u.prototype.lesser=s.prototype.lt=s.prototype.lesser=o.prototype.lt=o.prototype.lesser,o.prototype.greaterOrEquals=function(t){return this.compare(t)>=0},u.prototype.geq=u.prototype.greaterOrEquals=s.prototype.geq=s.prototype.greaterOrEquals=o.prototype.geq=o.prototype.greaterOrEquals,o.prototype.lesserOrEquals=function(t){return this.compare(t)<=0},u.prototype.leq=u.prototype.lesserOrEquals=s.prototype.leq=s.prototype.lesserOrEquals=o.prototype.leq=o.prototype.lesserOrEquals,o.prototype.isEven=function(){return 0==(1&this.value[0])},s.prototype.isEven=function(){return 0==(1&this.value)},u.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},o.prototype.isOdd=function(){return 1==(1&this.value[0])},s.prototype.isOdd=function(){return 1==(1&this.value)},u.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},o.prototype.isPositive=function(){return!this.sign},s.prototype.isPositive=function(){return this.value>0},u.prototype.isPositive=s.prototype.isPositive,o.prototype.isNegative=function(){return this.sign},s.prototype.isNegative=function(){return this.value<0},u.prototype.isNegative=s.prototype.isNegative,o.prototype.isUnit=function(){return!1},s.prototype.isUnit=function(){return 1===Math.abs(this.value)},u.prototype.isUnit=function(){return this.abs().value===BigInt(1)},o.prototype.isZero=function(){return!1},s.prototype.isZero=function(){return 0===this.value},u.prototype.isZero=function(){return this.value===BigInt(0)},o.prototype.isDivisibleBy=function(t){var e=Z(t);return!e.isZero()&&(!!e.isUnit()||(0===e.compareAbs(2)?this.isEven():this.mod(e).isZero()))},u.prototype.isDivisibleBy=s.prototype.isDivisibleBy=o.prototype.isDivisibleBy,o.prototype.isPrime=function(t){var e=E(this);if(void 0!==e)return e;var r=this.abs(),i=r.bitLength();if(i<=64)return x(r,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var a=Math.log(2)*i.toJSNumber(),o=Math.ceil(!0===t?2*Math.pow(a,2):a),s=[],u=0;u<o;u++)s.push(n(u+2));return x(r,s)},u.prototype.isPrime=s.prototype.isPrime=o.prototype.isPrime,o.prototype.isProbablePrime=function(t,e){var r=E(this);if(void 0!==r)return r;for(var i=this.abs(),a=void 0===t?5:t,o=[],s=0;s<a;s++)o.push(n.randBetween(2,i.minus(2),e));return x(i,o)},u.prototype.isProbablePrime=s.prototype.isProbablePrime=o.prototype.isProbablePrime,o.prototype.modInv=function(t){for(var e,r,i,a=n.zero,o=n.one,s=Z(t),u=this.abs();!u.isZero();)e=s.divide(u),r=a,i=s,a=o,s=u,o=r.subtract(e.multiply(o)),u=i.subtract(e.multiply(u));if(!s.isUnit())throw new Error(this.toString()+" and "+t.toString()+" are not co-prime");return-1===a.compare(0)&&(a=a.add(t)),this.isNegative()?a.negate():a},u.prototype.modInv=s.prototype.modInv=o.prototype.modInv,o.prototype.next=function(){var t=this.value;return this.sign?w(t,1,this.sign):new o(m(t,1),this.sign)},s.prototype.next=function(){var t=this.value;return t+1<e?new s(t+1):new o(r,!1)},u.prototype.next=function(){return new u(this.value+BigInt(1))},o.prototype.prev=function(){var t=this.value;return this.sign?new o(m(t,1),!0):w(t,1,this.sign)},s.prototype.prev=function(){var t=this.value;return t-1>-e?new s(t-1):new o(r,!0)},u.prototype.prev=function(){return new u(this.value-BigInt(1))};for(var j=[1];2*j[j.length-1]<=1e7;)j.push(2*j[j.length-1]);var q=j.length,D=j[q-1];function N(t){return Math.abs(t)<=1e7}function k(t,e,r){e=Z(e);for(var i=t.isNegative(),a=e.isNegative(),o=i?t.not():t,s=a?e.not():e,u=0,c=0,l=null,f=null,p=[];!o.isZero()||!s.isZero();)u=(l=S(o,D))[1].toJSNumber(),i&&(u=D-1-u),c=(f=S(s,D))[1].toJSNumber(),a&&(c=D-1-c),o=l[0],s=f[0],p.push(r(u,c));for(var h=0!==r(i?1:0,a?1:0)?n(-1):n(0),d=p.length-1;d>=0;d-=1)h=h.multiply(D).add(n(p[d]));return h}o.prototype.shiftLeft=function(t){var e=Z(t).toJSNumber();if(!N(e))throw new Error(String(e)+" is too large for shifting.");if(e<0)return this.shiftRight(-e);var r=this;if(r.isZero())return r;for(;e>=q;)r=r.multiply(D),e-=q-1;return r.multiply(j[e])},u.prototype.shiftLeft=s.prototype.shiftLeft=o.prototype.shiftLeft,o.prototype.shiftRight=function(t){var e,r=Z(t).toJSNumber();if(!N(r))throw new Error(String(r)+" is too large for shifting.");if(r<0)return this.shiftLeft(-r);for(var i=this;r>=q;){if(i.isZero()||i.isNegative()&&i.isUnit())return i;i=(e=S(i,D))[1].isNegative()?e[0].prev():e[0],r-=q-1}return(e=S(i,j[r]))[1].isNegative()?e[0].prev():e[0]},u.prototype.shiftRight=s.prototype.shiftRight=o.prototype.shiftRight,o.prototype.not=function(){return this.negate().prev()},u.prototype.not=s.prototype.not=o.prototype.not,o.prototype.and=function(t){return k(this,t,(function(t,e){return t&e}))},u.prototype.and=s.prototype.and=o.prototype.and,o.prototype.or=function(t){return k(this,t,(function(t,e){return t|e}))},u.prototype.or=s.prototype.or=o.prototype.or,o.prototype.xor=function(t){return k(this,t,(function(t,e){return t^e}))},u.prototype.xor=s.prototype.xor=o.prototype.xor;function B(t){var e=t.value,r="number"==typeof e?e|1<<30:"bigint"==typeof e?e|BigInt(1<<30):e[0]+1e7*e[1]|1073758208;return r&-r}function F(t,e){return t=Z(t),e=Z(e),t.greater(e)?t:e}function L(t,e){return t=Z(t),e=Z(e),t.lesser(e)?t:e}function T(t,e){if(t=Z(t).abs(),e=Z(e).abs(),t.equals(e))return t;if(t.isZero())return e;if(e.isZero())return t;for(var r,i,n=a[1];t.isEven()&&e.isEven();)r=L(B(t),B(e)),t=t.divide(r),e=e.divide(r),n=n.multiply(r);for(;t.isEven();)t=t.divide(B(t));do{for(;e.isEven();)e=e.divide(B(e));t.greater(e)&&(i=e,e=t,t=i),e=e.subtract(t)}while(!e.isZero());return n.isUnit()?t:t.multiply(n)}o.prototype.bitLength=function(){var t=this;return t.compareTo(n(0))<0&&(t=t.negate().subtract(n(1))),0===t.compareTo(n(0))?n(0):n(function t(e,r){if(r.compareTo(e)<=0){var i=t(e,r.square(r)),a=i.p,o=i.e,s=a.multiply(r);return s.compareTo(e)<=0?{p:s,e:2*o+1}:{p:a,e:2*o}}return{p:n(1),e:0}}(t,n(2)).e).add(n(1))},u.prototype.bitLength=s.prototype.bitLength=o.prototype.bitLength;var U=function(t,e,r,i){r=r||"0123456789abcdefghijklmnopqrstuvwxyz",t=String(t),i||(t=t.toLowerCase(),r=r.toLowerCase());var n,a=t.length,o=Math.abs(e),s={};for(n=0;n<r.length;n++)s[r[n]]=n;for(n=0;n<a;n++){if("-"!==(l=t[n])&&(l in s&&s[l]>=o)){if("1"===l&&1===o)continue;throw new Error(l+" is not a valid digit in base "+e+".")}}e=Z(e);var u=[],c="-"===t[0];for(n=c?1:0;n<t.length;n++){var l;if((l=t[n])in s)u.push(Z(s[l]));else{if("<"!==l)throw new Error(l+" is not a valid character");var f=n;do{n++}while(">"!==t[n]&&n<t.length);u.push(Z(t.slice(f+1,n)))}}return I(u,e,c)};function I(t,e,r){var i,n=a[0],o=a[1];for(i=t.length-1;i>=0;i--)n=n.add(t[i].times(o)),o=o.times(e);return r?n.negate():n}function J(t,e){if((e=n(e)).isZero()){if(t.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(e.equals(-1)){if(t.isZero())return{value:[0],isNegative:!1};if(t.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-t.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(t.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var i=!1;if(t.isNegative()&&e.isPositive()&&(i=!0,t=t.abs()),e.isUnit())return t.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(t.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:i};for(var a,o=[],s=t;s.isNegative()||s.compareAbs(e)>=0;){a=s.divmod(e),s=a.quotient;var u=a.remainder;u.isNegative()&&(u=e.minus(u).abs(),s=s.next()),o.push(u.toJSNumber())}return o.push(s.toJSNumber()),{value:o.reverse(),isNegative:i}}function R(t,e,r){var i=J(t,e);return(i.isNegative?"-":"")+i.value.map((function(t){return function(t,e){return t<(e=e||"0123456789abcdefghijklmnopqrstuvwxyz").length?e[t]:"<"+t+">"}(t,r)})).join("")}function C(t){if(c(+t)){var e=+t;if(e===d(e))return i?new u(BigInt(e)):new s(e);throw new Error("Invalid integer: "+t)}var r="-"===t[0];r&&(t=t.slice(1));var n=t.split(/e/i);if(n.length>2)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var a=n[1];if("+"===a[0]&&(a=a.slice(1)),(a=+a)!==d(a)||!c(a))throw new Error("Invalid integer: "+a+" is not a valid exponent.");var l=n[0],f=l.indexOf(".");if(f>=0&&(a-=l.length-f-1,l=l.slice(0,f)+l.slice(f+1)),a<0)throw new Error("Cannot include negative exponent part for integers");t=l+=new Array(a+1).join("0")}if(!/^([0-9][0-9]*)$/.test(t))throw new Error("Invalid integer: "+t);if(i)return new u(BigInt(r?"-"+t:t));for(var h=[],y=t.length,_=y-7;y>0;)h.push(+t.slice(_,y)),(_-=7)<0&&(_=0),y-=7;return p(h),new o(h,r)}function Z(t){return"number"==typeof t?function(t){if(i)return new u(BigInt(t));if(c(t)){if(t!==d(t))throw new Error(t+" is not an integer.");return new s(t)}return C(t.toString())}(t):"string"==typeof t?C(t):"bigint"==typeof t?new u(t):t}o.prototype.toArray=function(t){return J(this,t)},s.prototype.toArray=function(t){return J(this,t)},u.prototype.toArray=function(t){return J(this,t)},o.prototype.toString=function(t,e){if(void 0===t&&(t=10),10!==t)return R(this,t,e);for(var r,i=this.value,n=i.length,a=String(i[--n]);--n>=0;)r=String(i[n]),a+="0000000".slice(r.length)+r;return(this.sign?"-":"")+a},s.prototype.toString=function(t,e){return void 0===t&&(t=10),10!=t?R(this,t,e):String(this.value)},u.prototype.toString=s.prototype.toString,u.prototype.toJSON=o.prototype.toJSON=s.prototype.toJSON=function(){return this.toString()},o.prototype.valueOf=function(){return parseInt(this.toString(),10)},o.prototype.toJSNumber=o.prototype.valueOf,s.prototype.valueOf=function(){return this.value},s.prototype.toJSNumber=s.prototype.valueOf,u.prototype.valueOf=u.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var W=0;W<1e3;W++)a[W]=Z(W),W>0&&(a[-W]=Z(-W));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=F,a.min=L,a.gcd=T,a.lcm=function(t,e){return t=Z(t).abs(),e=Z(e).abs(),t.divide(T(t,e)).multiply(e)},a.isInstance=function(t){return t instanceof o||t instanceof s||t instanceof u},a.randBetween=function(t,e,r){t=Z(t),e=Z(e);var i=r||Math.random,n=L(t,e),o=F(t,e).subtract(n).add(1);if(o.isSmall)return n.add(Math.floor(i()*o));for(var s=J(o,1e7).value,u=[],c=!0,l=0;l<s.length;l++){var f=c?s[l]:1e7,p=d(i()*f);u.push(p),p<f&&(c=!1)}return n.add(a.fromArray(u,1e7,!1))},a.fromArray=function(t,e,r){return I(t.map(Z),Z(e||10),r)},a}();t.hasOwnProperty("exports")&&(t.exports=n),void 0===(i=function(){return n}.call(e,r,e,t))||(t.exports=i)}).call(this,r(22)(t))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(7),n=r(2);e.default=class{constructor(t,e,r,i=!0){this.api=t,this.name=e,this._data=new Promise(async(n,a)=>{if(r)n(r);else try{n(await t.queue.collection(e,i))}catch(t){a(t)}})}async author(){return(await this._data).author}async allowNotify(){return!!(await this._data).allow_notify}async authorizedAccounts(){return(await this._data).authorized_accounts}async notifyAccounts(){return(await this._data).notify_accounts}async marketFee(){return Number((await this._data).market_fee)}async data(){return n.deserialize((await this._data).serialized_data,i.ObjectSchema((await this.api.config()).collection_format))}async toObject(){return{collection_name:this.name,author:await this.author(),allowNotify:await this.allowNotify(),authorizedAccounts:await this.authorizedAccounts(),notifyAccounts:await this.notifyAccounts(),marketFee:await this.marketFee(),data:await this.data()}}}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectSchema=void 0;const n=i(r(4)),a=i(r(13)),o=i(r(25)),s=i(r(34));function u(t,e){const r=[];let i=e[t];void 0===i&&(i=[]),delete e[t];for(const t of i)r.push({name:t.name,value:c(t.type,e)});return new a.default(r)}function c(t,e){if(t.endsWith("[]"))return new s.default(c(t.substring(0,t.length-2),e));if(t.startsWith("object{")&&t.endsWith("}")){const r=parseInt(t.substring(7,t.length-1),10);if(isNaN(r))throw new n.default(`invalid type '${t}'`);return u(r,e)}return new o.default(t)}e.ObjectSchema=function(t){const e={};for(const r of t){const t=void 0===r.parent?0:r.parent;void 0===e[t]&&(e[t]=[]),e[t].push(r)}return u(0,e)}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(3)),a=i(r(1));e.default=class{constructor(t){this.size=t}deserialize(t){t.position+=this.size;const e=t.data.slice(t.position-this.size,t.position);if(e.length!==this.size)throw new n.default("FixedParser: read past end");return e}serialize(t){if(t.length!==this.size)throw new a.default("input data does not conform fixed size");return t}}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(3)),a=r(0);e.default=class{deserialize(t){const e=a.varint_decode(t).toJSNumber();t.position+=e;const r=t.data.slice(t.position-e,t.position);if(r.length!==e)throw new n.default("VariableParser: read past end");return r}serialize(t){return a.concat_byte_arrays([a.varint_encode(t.length),t])}}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(7),a=i(r(6));e.default=class{constructor(t,e,r,i,n=!0){this.api=t,this.name=r,this._data=new Promise(async(a,o)=>{if(i)a(i);else try{a(await t.queue.scheme(e,r,n))}catch(t){o(t)}}),this._collection=new Promise(async(r,i)=>{try{r(new a.default(t,e,void 0,n))}catch(t){i(t)}})}async format(){return n.ObjectSchema((await this._data).format)}async rawFormat(){return(await this._data).format}async toObject(){return{scheme_name:this.name,collection:await(await this._collection).toObject(),format:(await this._data).format}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i extends Error{constructor(t){t.error&&t.error.details&&t.error.details.length&&t.error.details[0].message?super(t.error.details[0].message):t.processed&&t.processed.except&&t.processed.except.message?super(t.processed.except.message):super(t.message),this.json=t}}e.default=i},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(2),a=i(r(6)),o=i(r(15)),s=i(r(10));e.default=class{constructor(t,e,r,i,n,u,c,l=!0){this.api=t,this.id=r,this._data=new Promise(async(n,a)=>{if(i)n(i);else try{n(await t.queue.asset(e,r,l))}catch(t){a(t)}}),this._preset=new Promise(async(e,r)=>{if(c)e(c);else try{const r=await this._data;if(Number(r.preset_id)<0)return e(null);e(new o.default(t,r.collection_name,r.preset_id,void 0,void 0,l))}catch(t){r(t)}}),this._collection=new Promise(async(e,r)=>{if(n)e(n);else try{const r=await this._data;e(new a.default(t,r.collection_name,void 0,l))}catch(t){r(t)}}),this._scheme=new Promise(async(e,r)=>{if(u)e(u);else try{const r=await this._data;e(new s.default(t,r.collection_name,r.scheme_name,void 0,l))}catch(t){r(t)}})}async preset(){return await this._preset}async collection(){return await this._collection}async scheme(){return await this._scheme}async backedTokens(){return(await this._data).backed_tokens}async immutableData(){const t=await this.scheme(),e=await this._data;return n.deserialize(e.immutable_serialized_data,await t.format())}async mutableData(){const t=await this.scheme(),e=await this._data;return n.deserialize(e.mutable_serialized_data,await t.format())}async data(){const t=await this.mutableData(),e=await this.immutableData(),r=await this.preset(),i=r?await r.immutableData():{};return Object.assign({},t,e,i)}async toObject(){const t=await this.preset(),e=await this.collection(),r=await this.scheme();return{asset_id:this.id,collection:await e.toObject(),scheme:await r.toObject(),preset:t?await t.toObject():null,backedTokens:await this.backedTokens(),immutableData:await this.immutableData(),mutableData:await this.mutableData(),data:await this.data()}}}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(4)),a=r(0);e.default=class{constructor(t){this.attributes=t,this.reserved=4}deserialize(t){const e={};for(;t.position<t.data.length;){const r=a.varint_decode(t);if(r.equals(0))break;const i=this.getAttribute(r.toJSNumber());e[i.name]=i.value.deserialize(t)}return e}serialize(t){const e=[];for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r];void 0!==t[i.name]&&(e.push(a.varint_encode(r+this.reserved)),e.push(i.value.serialize(t[i.name])))}return e.push(a.varint_encode(0)),a.concat_byte_arrays(e)}getAttribute(t){const e=t-this.reserved;if(e>=this.attributes.length)throw new n.default("attribute does not exists");return this.attributes[Number(e)]}}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ParserTypes=void 0;const n=i(r(26)),a=r(27),o=i(r(28)),s=i(r(29)),u=i(r(31)),c=i(r(32)),l=i(r(33));e.ParserTypes={int8:new l.default(1,!1),int16:new l.default(2,!1),int32:new l.default(4,!1),int64:new l.default(8,!1),uint8:new l.default(1,!0),uint16:new l.default(2,!0),uint32:new l.default(4,!0),uint64:new l.default(8,!0),fixed8:new o.default(1),fixed16:new o.default(2),fixed32:new o.default(4),fixed64:new o.default(8),bool:new n.default,bytes:new a.ByteParser,string:new c.default,ipfs:new u.default,float:new s.default(!1),double:new s.default(!0)}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(2),a=i(r(10));e.default=class{constructor(t,e,r,i,n,o=!0){this.api=t,this.id=r,this._data=new Promise(async(n,a)=>{if(i)n(i);else try{n(await t.queue.preset(e,r,o))}catch(t){a(t)}}),this._scheme=new Promise(async(t,r)=>{if(n)t(n);else try{const r=await this._data;t(new a.default(this.api,e,r.scheme_name,void 0,o))}catch(t){r(t)}})}async scheme(){return await this._scheme}async immutableData(){const t=await this._scheme;return n.deserialize((await this._data).immutable_serialized_data,await t.format())}async isTransferable(){return!!(await this._data).transferable}async isBurnable(){return!!(await this._data).burnable}async maxSupply(){return(await this._data).max_supply}async circulation(){return(await this._data).issued_supply}async toObject(){return{preset_id:this.id,scheme:await(await this.scheme()).toObject(),immutableData:await this.immutableData(),transferable:await this.isTransferable(),burnable:await this.isBurnable(),maxSupply:await this.maxSupply(),circulation:await this.circulation()}}}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ParserTypes=e.serialize=e.deserialize=e.ObjectSchema=e.ExplorerApi=e.RpcApi=void 0;const n=i(r(17));e.ExplorerApi=n.default;const a=i(r(18));e.RpcApi=a.default;const o=r(7);Object.defineProperty(e,"ObjectSchema",{enumerable:!0,get:function(){return o.ObjectSchema}});const s=r(2);Object.defineProperty(e,"deserialize",{enumerable:!0,get:function(){return s.deserialize}}),Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return s.serialize}});const u=r(14);Object.defineProperty(e,"ParserTypes",{enumerable:!0,get:function(){return u.ParserTypes}})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e){this.endpoint=t}}},function(t,e,r){"use strict";(function(t){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(20)),a=i(r(11)),o=i(r(12)),s=i(r(35)),u=i(r(6)),c=i(r(36)),l=i(r(15)),f=i(r(37)),p=i(r(10));e.default=class{constructor(e,r,i={rateLimit:4}){this.endpoint=e,this.contract=r,i.fetch?this.fetchBuiltin=i.fetch:this.fetchBuiltin=t.fetch,this.queue=new f.default(this,i.rateLimit),this.cache=new s.default,this.action=new n.default(this),this._config=new Promise(async(t,e)=>{try{const r=await this.getTableRows({code:this.contract,scope:this.contract,table:"config"});return 1!==r.rows.length?e("invalid config"):t(r.rows[0])}catch(t){e(t)}})}async config(){return await this._config}async getAsset(t,e,r=!0){return r||this.cache.asset(e,null),new o.default(this,t,e,void 0,void 0,void 0,void 0,r)}async getPreset(t,e,r=!0){return r||this.cache.preset(e,null),new l.default(this,t,e,void 0,void 0,r)}async getCollection(t,e=!0){return e||this.cache.collection(t,null),new u.default(this,t,void 0,e)}async getCollectionPresets(t,e=!0){return(await this.queue.collection_presets(t)).map(r=>new l.default(this,t,String(r.preset_id),r,void 0,e))}async getCollectionsSchemes(t,e=!0){return(await this.queue.collection_schemes(t)).map(r=>new p.default(this,t,r.scheme_name,void 0,e))}async getScheme(t,e,r=!0){return r||this.cache.scheme(e,null),new p.default(this,t,e,void 0,r)}async getOffer(t,e=!0){return e||this.cache.offer(t,null),new c.default(this,t,void 0,void 0,void 0,e)}async getAccountOffers(t,e=!0){return(await this.queue.account_offers(t)).map(t=>new c.default(this,t.offer_id,t,void 0,void 0,e))}async getAccountAssets(t,e=!0){return(await this.queue.account_assets(t)).map(r=>new o.default(this,t,r.asset_id,r,void 0,void 0,void 0,e))}async getTableRows({code:t,scope:e,table:r,table_key:i="",lower_bound:n="",upper_bound:a="",index_position:o=1,key_type:s=""}){return await this.fetchRpc("/v1/chain/get_table_rows",{code:t,scope:e,table:r,table_key:i,lower_bound:n,upper_bound:a,index_position:o,key_type:s,limit:101,reverse:!1,show_payer:!1,json:!0})}async fetchRpc(t,e){let r,i;try{const n=this.fetchBuiltin;r=await n(this.endpoint+t,{body:JSON.stringify(e),method:"POST"}),i=await r.json()}catch(t){throw t.isFetchError=!0,t}if(i.processed&&i.processed.except||!r.ok)throw new a.default(i);return i}}}).call(this,r(19))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(1)),a=i(r(21));class o extends a.default{constructor(t){super(t.contract),this.api=t}static toAttributeMap(t,e){const r={},i=[];for(const t of e)r[t.name]=t.type;const a=Object.keys(t);for(const e of a){if(void 0!==r[e])throw new n.default("field not defined in scheme");i.push({key:e,value:[r[e],t[e]]})}return i}async createcol(t,e,r,i,n,a,s,u){const c=await this.api.config();return super.createcol(t,e,r,i,n,a,s,o.toAttributeMap(u,c.collection_format))}async createpreset(t,e,r,i,n,a,s,u){const c=await this.api.getScheme(r,i),l=o.toAttributeMap(u,await c.rawFormat());return super.createpreset(t,e,r,i,n,a,s,l)}async mintasset(t,e,r,i,n,a,s,u){const c=await this.api.getPreset(r,n),l=o.toAttributeMap(s,await(await c.scheme()).rawFormat()),f=o.toAttributeMap(u,await(await c.scheme()).rawFormat());return super.mintasset(t,e,r,i,n,a,l,f)}async setassetdata(t,e,r,i,n){const a=await this.api.getAsset(r,i),s=await a.scheme(),u=o.toAttributeMap(n,await s.rawFormat());return super.setassetdata(t,e,r,i,u)}async setcoldata(t,e,r){const i=o.toAttributeMap(r,(await this.api.config()).collection_format);return super.setcoldata(t,e,i)}}e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){this.contract=t}async acceptoffer(t,e){return this._pack(t,"acceptoffer",{offer_id:e})}async addcolauth(t,e,r){return this._pack(t,"addcolauth",{collection_name:e,account_to_add:r})}async addconftoken(t,e,r){return this._pack(t,"addconftoken",{token_contract:e,token_symbol:r})}async addnotifyacc(t,e,r){return this._pack(t,"addnotifyacc",{collection_name:e,account_to_add:r})}async admincoledit(t,e){return this._pack(t,"admincoledit",{collection_format_extension:e})}async backsymbol(t,e,r,i,n,a,o){const s=this._pack(t,"backsymbol",{ram_payer:e,owner:r,asset_id:i,symbol_to_announce:n});return s.push({account:a,name:"transfer",authorization:t,data:{from:e,to:this.contract,quantity:o+" "+n}}),s}async burnasset(t,e,r){return this._pack(t,"burnasset",{owner:e,asset_id:r})}async canceloffer(t,e){return this._pack(t,"canceloffer",{offer_id:e})}async createcol(t,e,r,i,n,a,o,s){return this._pack(t,"createcol",{author:e,collection_name:r,allow_notify:i,authorized_accounts:n,notify_accounts:a,market_fee:o,data:s})}async createoffer(t,e,r,i,n,a){return this._pack(t,"createoffer",{sender:e,recipient:r,sender_asset_ids:i,recipient_asset_ids:n,memo:a})}async createpreset(t,e,r,i,n,a,o,s){return this._pack(t,"createpreset",{authorized_creator:e,collection_name:r,scheme_name:i,transferable:n,burnable:a,max_supply:o,immutable_data:s})}async createscheme(t,e,r,i,n){return this._pack(t,"createscheme",{authorized_creator:e,collection_name:r,scheme_name:i,scheme_format:n})}async declineoffer(t,e){return this._pack(t,"declineoffer",{offer_id:e})}async extendscheme(t,e,r,i,n){return this._pack(t,"extendscheme",{authorized_editor:e,collection_name:r,scheme_name:i,scheme_format_extension:n})}async forbidnotify(t,e){return this._pack(t,"forbidnotify",{collection_name:e})}async mintasset(t,e,r,i,n,a,o,s){return this._pack(t,"mintasset",{authorized_minter:e,collection_name:r,scheme_name:i,preset_id:n,new_owner:a,immutable_data:o,mutable_data:s})}async remcolauth(t,e,r){return this._pack(t,"remcolauth",{collection_name:e,account_to_remove:r})}async remnotifyacc(t,e,r){return this._pack(t,"remnotifyacc",{collection_name:e,account_to_remove:r})}async setassetdata(t,e,r,i,n){return this._pack(t,"setassetdata",{authorized_editor:e,owner:r,asset_id:i,new_mutable_data:n})}async setcoldata(t,e,r){return this._pack(t,"setcoldata",{collection_name:e,data:r})}async setmarketfee(t,e,r){return this._pack(t,"setmarketfee",{collection_name:e,market_fee:r})}async transfer(t,e,r,i,n){return this._pack(t,"transfer",{from:e,to:r,asset_ids:i,memo:n})}_pack(t,e,r){return[{account:this.contract,name:e,authorization:t,data:r}]}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){if(this.ALPHABET=t,t.length>=255)throw new TypeError("Alphabet too long");this.BASE_MAP=new Uint8Array(256);for(let t=0;t<this.BASE_MAP.length;t++)this.BASE_MAP[t]=255;for(let e=0;e<t.length;e++){const r=t.charAt(e),i=r.charCodeAt(0);if(255!==this.BASE_MAP[i])throw new TypeError(r+" is ambiguous");this.BASE_MAP[i]=e}this.BASE=t.length,this.LEADER=t.charAt(0),this.FACTOR=Math.log(this.BASE)/Math.log(256),this.iFACTOR=Math.log(256)/Math.log(this.BASE)}encode(t){if(0===t.length)return"";let e=0,r=0,i=0;const n=t.length;for(;i!==n&&0===t[i];)i++,e++;const a=(n-i)*this.iFACTOR+1>>>0,o=new Uint8Array(a);for(;i!==n;){let e=t[i],n=0;for(let t=a-1;(0!==e||n<r)&&-1!==t;t--,n++)e+=256*o[t]>>>0,o[t]=e%this.BASE>>>0,e=e/this.BASE>>>0;if(0!==e)throw new Error("Non-zero carry");r=n,i++}let s=a-r;for(;s!==a&&0===o[s];)s++;let u=this.LEADER.repeat(e);for(;s<a;++s)u+=this.ALPHABET.charAt(o[s]);return u}decode(t){const e=this.decodeUnsafe(t);if(e)return e;throw new Error("Non-base"+this.BASE+" character")}decodeUnsafe(t){if(0===t.length)return new Uint8Array(0);let e=0;if(" "===t[e])return new Uint8Array(0);let r=0,i=0;for(;t[e]===this.LEADER;)r++,e++;const n=(t.length-e)*this.FACTOR+1>>>0,a=new Uint8Array(n);for(;t[e];){let r=this.BASE_MAP[t.charCodeAt(e)];if(255===r)return new Uint8Array(0);let o=0;for(let t=n-1;(0!==r||o<i)&&-1!==t;t--,o++)r+=this.BASE*a[t]>>>0,a[t]=r%256>>>0,r=r/256>>>0;if(0!==r)throw new Error("Non-zero carry");i=o,e++}if(" "===t[e])return new Uint8Array(0);let o=n-i;for(;o!==n&&0===a[o];)o++;const s=new Uint8Array(r+(n-o));s.fill(0,0,r);let u=r;for(;o!==n;)s[u++]=a[o++];return s}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prepare=void 0;class i{constructor(t,e=0){this.data=t,this.position=e}}e.default=i,e.prepare=function(t){return new i(t,0)}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(4)),a=r(14);e.default=class{constructor(t){if(void 0===a.ParserTypes[t])throw new n.default(`attribute type '${t}' not defined`);this.parser=a.ParserTypes[t]}deserialize(t){return this.parser.deserialize(t)}serialize(t){return this.parser.serialize(t)}}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(8));class a extends n.default{constructor(){super(1)}deserialize(t){return 1===super.deserialize(t)[0]}serialize(t){return super.serialize(new Uint8Array([t?1:0]))}}e.default=a},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ByteParser=void 0;const n=i(r(9));class a extends n.default{deserialize(t){return super.deserialize(t)}serialize(t){return super.serialize(t)}}e.ByteParser=a},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(0),a=i(r(8)),o=i(r(5));class s extends a.default{deserialize(t){const e=super.deserialize(t).reverse();let r=o.default(0);for(const t of e)r=r.shiftLeft(8),r=r.plus(t);return r=n.integer_unsign(r,this.size),this.size<=6?r.toJSNumber():r.toString()}serialize(t){let e=o.default(t);const r=[];e=n.integer_sign(e,this.size);for(let t=0;t<this.size;t++)r.push(e.and(255).toJSNumber()),e=e.shiftRight(8);return super.serialize(new Uint8Array(r))}}e.default=s},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(8)),a=r(30);class o extends n.default{constructor(t){super(t?8:4),this.isDouble=t}deserialize(t){return this.isDouble?a.readDoubleLE(super.deserialize(t)):a.readFloatLE(super.deserialize(t))}serialize(t){let e=[];return this.isDouble?(a.writeDoubleLE(e,t),super.serialize(new Uint8Array(e))):(a.writeFloatLE(e,t),super.serialize(new Uint8Array(e)))}}e.default=o},function(t,e,r){"use strict";var i,n,a,o,s,u,c,l,f,p,h,d,y=!1;function _(t,e,r){var i=t[e++],n=t[e++],a=t[e++],o=t[e];return"bige"===r?256*(256*(256*i+n)+a)+o:256*(256*(256*o+a)+n)+i}function m(t,e,r,i){var n=e>>>24&255,a=e>>16&255,o=e>>8&255,s=255&e;"bige"===i?(t[r++]=n,t[r++]=a,t[r++]=o,t[r]=s):(t[r++]=s,t[r++]=o,t[r++]=a,t[r]=n)}function v(t,e,r,i,n){"bige"===n?(m(t,e,i,n),m(t,r,i+4,n)):(m(t,r,i,n),m(t,e,i+4,n))}"function"==typeof Float32Array&&(f=new Float32Array(1),p=new Uint8Array(f.buffer),f[0]=-1,y=0===p[3],i=function(t,e){return(e=e||0)<0||e+4>t.length?0:(p[0]=t[e++],p[1]=t[e++],p[2]=t[e++],p[3]=t[e],f[0])},a=function(t,e){return(e=e||0)<0||e+4>t.length?0:(p[3]=t[e++],p[2]=t[e++],p[1]=t[e++],p[0]=t[e],f[0])},n=function(t,e,r){r=r||0,f[0]=e,t[r++]=p[0],t[r++]=p[1],t[r++]=p[2],t[r]=p[3]},o=function(t,e,r){r=r||0,f[0]=e,t[r++]=p[3],t[r++]=p[2],t[r++]=p[1],t[r]=p[0]}),"function"==typeof Float64Array&&(h=new Float64Array(1),d=new Uint8Array(h.buffer),s=function(t,e){return(e=e||0)<0||e+8>t.length?0:(d[0]=t[e+0],d[1]=t[e+1],d[2]=t[e+2],d[3]=t[e+3],d[4]=t[e+4],d[5]=t[e+5],d[6]=t[e+6],d[7]=t[e+7],h[0])},c=function(t,e){return(e=e||0)<0||e+8>t.length?0:(d[7]=t[e+0],d[6]=t[e+1],d[5]=t[e+2],d[4]=t[e+3],d[3]=t[e+4],d[2]=t[e+5],d[1]=t[e+6],d[0]=t[e+7],h[0])},u=function(t,e,r){r=r||0,h[0]=e,t[r+0]=d[0],t[r+1]=d[1],t[r+2]=d[2],t[r+3]=d[3],t[r+4]=d[4],t[r+5]=d[5],t[r+6]=d[6],t[r+7]=d[7]},l=function(t,e,r){r=r||0,h[0]=e,t[r+0]=d[7],t[r+1]=d[6],t[r+2]=d[5],t[r+3]=d[4],t[r+4]=d[3],t[r+5]=d[2],t[r+6]=d[1],t[r+7]=d[0]});for(var w=new Array,g=0;g<1200;g++)w[g]=Math.pow(2,g);var b=new Array;for(g=0;g<1200;g++)b[g]=Math.pow(2,-g);function A(t){return t>=0?w[t]:b[-t]}A(-1023);function M(t,e,r){var i,n,a=_(t,e,r),o=_(t,e+4,r);"bige"===r?(i=a,n=o):(i=o,n=a);var s=4294967296*(1048575&i)+n,u=(2146435072&i)>>>20;return(i>>31||1)*(0===u?s?s*A(-1074):0:u<2047?s>=0?(1+2220446049250313e-31*s)*A(u-1023):0:s?NaN:1/0)}var z=Math.pow(2,-23),P=Math.pow(2,-127);function S(t,e,r){var i=_(t,e,r),n=8388607&i,a=(2139095040&i)>>>23;return(i>>31||1)*(0===a?n?n*z*2*P:0:a<255?(1+n*z)*A(a-127):n?NaN:1/0)}var O={exp:0,mant:0};function E(t){var e=0;return t>=2?(t*=A(-(e=j(1,t))))>=2&&(t/=2,e+=1):t<1&&((e=j(t,2))<=1023?t*=A(e):(t*=A(e-100),t*=A(100)),e=-e),O.exp=e,O.mant=t,O}var x=Math.pow(2,192);function j(t,e){for(var r=0;t*x<e;)t*=x,r+=192;for(;0x10000000000000000*t<e;)t*=0x10000000000000000,r+=64;for(;65536*t<e;)t*=65536,r+=16;for(;64*t<e;)t*=64,r+=6;for(;2*t<e;)t*=2,r+=1;return r}function q(t,e){return(t*=e)-Math.floor(t)!=.5||1&t?t+.5:t}function D(t,e,r,i){var n,a=0;e<0&&(a=2147483648,e=-e),e&&e<1/0?((n=E(e)).exp+=127,n.exp<=0?n.exp<=-25?(n.mant=0,n.exp=0):(n.mant=q(n.mant,A(22+n.exp)),n.exp=0,n.mant>=8388608&&(n.mant-=8388608,n.exp+=1)):(n.mant=q(n.mant-1,8388608),n.mant>=8388608&&(n.mant-=8388608,n.exp+=1),n.exp>254&&(n.mant=0,n.exp=255)),m(t,a|n.exp<<23|n.mant,r,i)):m(t,0===e?1/e<0?2147483648:0:e===1/0?2139095040|a:2143289344,r,i)}new Uint8Array(8);var N=Math.pow(2,52);function k(t,e,r,i){var n,a,o,s=0;e<0&&(s=2147483648,e=-e),e&&e<1/0?((n=E(e)).exp+=1023,n.exp<=0?(n.mant*=A(51+n.exp),n.exp=0):n.mant=(n.mant-1)*N,v(t,a=s|n.exp<<20|n.mant/4294967296,o=n.mant>>>0,r,i)):(0===e?(a=1/e<0?2147483648:0,o=0):e===1/0?(a=s+2146435072,o=0):(a=2146959360,o=0),v(t,a,o,r,i))}(function e(){var r=t.exports||this;r.readWord=_,r.writeWord=m,r.writeDoubleWord=v,r.readFloat=S,r.writeFloat=D,r.readDouble=M,r.writeDouble=k,r._useFloatArray=function(t){r._usingFloatArray=t,t?("full"==t&&(r.readFloatLE=y?a:i),r.writeFloatLE=y?o:n,"full"==t&&(r.readFloatBE=y?i:a),r.writeFloatBE=y?n:o,r.readDoubleLE=y?c:s,r.writeDoubleLE=y?l:u,r.readDoubleBE=y?s:c,r.writeDoubleBE=y?u:l):(r._usingFloatArray="",r.readFloatLE=function(t,e){return r.readFloat(t,e||0,"le")},r.writeFloatLE=function(t,e,i){r.writeFloat(t,e,i||0,"le")},r.readFloatBE=function(t,e){return r.readFloat(t,e||0,"bige")},r.writeFloatBE=function(t,e,i){r.writeFloat(t,e,i||0,"bige")},r.readDoubleLE=function(t,e){return r.readDouble(t,e||0,"le")},r.writeDoubleLE=function(t,e,i){r.writeDouble(t,e,i||0,"le")},r.readDoubleBE=function(t,e){return r.readDouble(t,e||0,"bige")},r.writeDoubleBE=function(t,e,i){r.writeDouble(t,e,i||0,"bige")})},r._getBigeCpu=function(){return y},r._setBigeCpu=function(t){y=t},r._useFloatArray(!1),r._useFloatArray(i&&s&&"fastest"),e.prototype=r}).call(this)},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(0),a=i(r(9));class o extends a.default{deserialize(t){return n.base58_encode(super.deserialize(t))}serialize(t){return super.serialize(n.base58_decode(t))}}e.default=o},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(9));class a extends n.default{deserialize(t){return String.fromCharCode.apply(null,super.deserialize(t))}serialize(t){return super.serialize((new TextEncoder).encode(t))}}e.default=a},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(3)),a=i(r(1)),o=r(0),s=i(r(5));e.default=class{constructor(t,e){this.size=t,this.unsigned=e}deserialize(t){let e=o.varint_decode(t);if(this.unsigned||(e=o.zigzag_decode(e)),e.greaterOrEquals(s.default(2).pow(8*this.size-(this.unsigned?0:1))))throw new n.default("number '"+e.toString()+"' too large for given type");return this.size<=6?e.toJSNumber():e.toString()}serialize(t){let e=s.default(t);if(e.greaterOrEquals(s.default(2).pow(8*this.size-(this.unsigned?0:1))))throw new a.default("number '"+e.toString()+"' too large for given type");return this.unsigned||(e=o.zigzag_encode(e)),o.varint_encode(e)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(0);e.default=class{constructor(t){this.element=t}deserialize(t){const e=i.varint_decode(t).toJSNumber(),r=[];for(let i=0;i<e;i++)r.push(this.element.deserialize(t));return r}serialize(t){const e=[i.varint_encode(t.length)];for(const r of t)e.push(this.element.serialize(r));return i.concat_byte_arrays(e)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(){this.assets={},this.presets={},this.schemes={},this.collections={},this.offers={}}static access(t,e,r){if(null!==r){if(r)return e[String(t)]={expiration:Date.now()+9e5,updated:Date.now(),data:r},r;if(!(void 0===e[String(t)]||e[String(t)].expiration<Date.now()||!1===r&&Date.now()-e[String(t)].updated>5e3))return e[String(t)].data}else delete e[String(t)]}asset(t,e){return e&&(e.mutable_serialized_data=new Uint8Array(e.mutable_serialized_data),e.immutable_serialized_data=new Uint8Array(e.immutable_serialized_data)),i.access(t,this.assets,e)}preset(t,e){return e&&(e.immutable_serialized_data=new Uint8Array(e.immutable_serialized_data)),i.access(t,this.presets,e)}scheme(t,e){return i.access(t,this.schemes,e)}collection(t,e){return i.access(t,this.collections,e)}offer(t,e){return i.access(t,this.offers,e)}}e.default=i},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(12));e.default=class{constructor(t,e,r,i,a,o=!0){this.api=t,this.id=e,this._data=new Promise(async(t,i)=>{if(r)t(r);else try{t(await this.api.queue.offer(e,o))}catch(t){i(t)}}),this._senderAssets=new Promise(async(t,e)=>{if(i)t(i);else try{const e=await this._data,r=await this.api.queue.account_assets(e.offer_sender,o);return t(e.sender_asset_ids.map(t=>{const i=r.find(e=>e.asset_id===t);return i?new n.default(this.api,e.offer_sender,t,i,void 0,void 0,void 0,o):t}))}catch(t){return e(t)}}),this._recipientAssets=new Promise(async(t,e)=>{if(a)t(a);else try{const e=await this._data,r=await this.api.queue.account_assets(e.offer_recipient,o);return t(e.recipient_asset_ids.map(t=>{const i=r.find(e=>e.asset_id===t);return i?new n.default(this.api,e.offer_recipient,t,i,void 0,void 0,void 0,o):t}))}catch(t){return e(t)}})}async sender(){return(await this._data).offer_sender}async recipient(){return(await this._data).offer_recipient}async senderAssets(){return await this._senderAssets}async recipientAssets(){return await this._recipientAssets}async memo(){return(await this._data).memo}async toObject(){return{offer_id:this.id,sender:{account:await this.sender(),assets:await Promise.all((await this.senderAssets()).map(async t=>"string"==typeof t?t:await t.toObject()))},recipient:{account:await this.recipient(),assets:await Promise.all((await this.recipientAssets()).map(async t=>"string"==typeof t?t:await t.toObject()))},memo:await this.memo()}}}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(11));e.default=class{constructor(t,e=4){this.api=t,this.requestLimit=e,this.elements=[],this.interval=null}async asset(t,e,r=!0){return this.fetch_single_row("assets",t,e,this.api.cache.asset.bind(this.api.cache),r)}async account_assets(t,e=!0){return this.fetch_all_rows("assets",t,"id","","",this.api.cache.asset.bind(this.api.cache),e)}async preset(t,e,r=!0){return this.fetch_single_row("presets",t,e,this.api.cache.preset.bind(this.api.cache),r)}async collection_presets(t,e=!0){return this.fetch_all_rows("presets",t,"preset_id","","",this.api.cache.preset.bind(this.api.cache),e)}async scheme(t,e,r=!0){return this.fetch_single_row("schemes",t,e,this.api.cache.scheme.bind(this.api.cache),r)}async collection_schemes(t,e=!0){return this.fetch_all_rows("schemes",t,"scheme_name","","",this.api.cache.scheme.bind(this.api.cache),e)}async collection(t,e=!0){return this.fetch_single_row("collections",this.api.contract,t,this.api.cache.collection.bind(this.api.cache),e)}async offer(t,e=!0){return this.fetch_single_row("offers",this.api.contract,t,this.api.cache.offer.bind(this.api.cache),e)}async account_offers(t,e=!0){const r=await Promise.all([this.fetch_all_rows("offers",this.api.contract,"offer_sender",t,t,this.api.cache.offer.bind(this.api.cache),e,2,"name"),this.fetch_all_rows("offers",this.api.contract,"offer_recipient",t,t,this.api.cache.offer.bind(this.api.cache),e,3,"name")]);return r[0].concat(r[1])}dequeue(){this.interval||(this.interval=setInterval(async()=>{this.elements.length>0?this.elements.shift()():(clearInterval(this.interval),this.interval=null)},Math.ceil(1e3/this.requestLimit)))}async fetch_single_row(t,e,r,i=null,a=!0,o=1,s=""){let u=i(r,!!a&&void 0);return new Promise((c,l)=>{if(u)return c(u);this.elements.push(async()=>{if(u=i(r,!!a&&void 0),u)return this.elements.length>0&&this.elements.shift()(),c(u);try{const a=await this.api.getTableRows({code:this.api.contract,table:t,scope:e,limit:1,lower_bound:r,upper_bound:r,index_position:o,key_type:s});return 1!==a.rows.length?l(new n.default("row not found '"+r+"'")):c(i(r,a.rows[0]))}catch(t){return l(t)}}),this.dequeue()})}async fetch_all_rows(t,e,r,i="",n="",a,o=!0,s=1,u=""){return new Promise(async(c,l)=>{this.elements.push(async()=>{const f=await this.api.getTableRows({code:this.api.contract,scope:e,table:t,lower_bound:i,upper_bound:n,limit:100,index_position:s,key_type:u});f.more&&1===s?(this.elements.unshift(async()=>{try{let i=await this.fetch_all_rows(t,e,r,f.rows[f.rows.length-1][r],n,a,o);i.shift(),i=i.map(t=>a(t[r],t)),c(f.rows.concat(i))}catch(t){l(t)}}),this.dequeue()):c(f.rows)}),this.dequeue()})}}}]);